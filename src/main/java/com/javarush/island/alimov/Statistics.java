package com.javarush.island.alimov;
// –ü–∞–∫–µ—Ç, –≤ –∫–æ—Ç–æ—Ä–æ–º –Ω–∞—Ö–æ–¥–∏—Ç—Å—è –¥–∞–Ω–Ω—ã–π –∫–ª–∞—Å—Å. –û—Ä–≥–∞–Ω–∏–∑—É–µ—Ç —Å—Ç—Ä—É–∫—Ç—É—Ä—É –ø—Ä–æ–µ–∫—Ç–∞.

import com.javarush.island.alimov.entity.animals.Animal;
// –ò–º–ø–æ—Ä—Ç –±–∞–∑–æ–≤–æ–≥–æ –∫–ª–∞—Å—Å–∞ Animal –¥–ª—è —Ä–∞–±–æ—Ç—ã —Å –∂–∏–≤–æ—Ç–Ω—ã–º–∏.

import com.javarush.island.alimov.entity.animals.herbivors.*;
// –ò–º–ø–æ—Ä—Ç –≤—Å–µ—Ö —Ç—Ä–∞–≤–æ—è–¥–Ω—ã—Ö –∂–∏–≤–æ—Ç–Ω—ã—Ö.

import com.javarush.island.alimov.entity.animals.predators.*;
// –ò–º–ø–æ—Ä—Ç –≤—Å–µ—Ö —Ö–∏—â–Ω–∏–∫–æ–≤.

import com.javarush.island.alimov.entity.plants.*;
// –ò–º–ø–æ—Ä—Ç –≤—Å–µ—Ö —Ä–∞—Å—Ç–µ–Ω–∏–π.

import java.util.List;
// –ò–º–ø–æ—Ä—Ç –∫–ª–∞—Å—Å–∞ List –¥–ª—è —Ö—Ä–∞–Ω–µ–Ω–∏—è –∫–æ–ª–ª–µ–∫—Ü–∏–π –æ–±—ä–µ–∫—Ç–æ–≤.

import java.util.Map;
// –ò–º–ø–æ—Ä—Ç –∫–ª–∞—Å—Å–∞ Map –¥–ª—è –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏—è –∫–ª—é—á-–∑–Ω–∞—á–µ–Ω–∏–µ.
/**
 * –ö–ª–∞—Å—Å {@code Statistics} –æ—Ç–≤–µ—á–∞–µ—Ç –∑–∞ —Å–±–æ—Ä –∏ –≤—ã–≤–æ–¥ —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∏ –ø–æ –æ–±—ä–µ–∫—Ç–∞–º (–∂–∏–≤–æ—Ç–Ω—ã–º –∏ —Ä–∞—Å—Ç–µ–Ω–∏—è–º)
 * –Ω–∞ –æ—Å—Ç—Ä–æ–≤–µ. –ü–æ–∑–≤–æ–ª—è–µ—Ç –ø–æ–¥—Å—á–∏—Ç—ã–≤–∞—Ç—å –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ —ç–∫–∑–µ–º–ø–ª—è—Ä–æ–≤ –∫–æ–Ω–∫—Ä–µ—Ç–Ω–æ–≥–æ –∫–ª–∞—Å—Å–∞ –∏ –≤—ã–≤–æ–¥–∏—Ç—å
 * —Ä–µ–∑—É–ª—å—Ç–∞—Ç –≤ –∫–æ–Ω—Å–æ–ª—å —Å —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤—É—é—â–µ–π –∏–∫–æ–Ω–∫–æ–π.
 *
 * <p>–û—Å–Ω–æ–≤–Ω—ã–µ –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏:
 * <ul>
 *     <li>–ü–æ–¥—Å—á—ë—Ç –∫–æ–ª–∏—á–µ—Å—Ç–≤–∞ –∂–∏–≤–æ—Ç–Ω—ã—Ö –∏–ª–∏ —Ä–∞—Å—Ç–µ–Ω–∏–π –æ–ø—Ä–µ–¥–µ–ª—ë–Ω–Ω–æ–≥–æ –∫–ª–∞—Å—Å–∞ –Ω–∞ –≤—Å—ë–º –æ—Å—Ç—Ä–æ–≤–µ.</li>
 *     <li>–í—ã–≤–æ–¥ —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∏ –≤ –∫–æ–Ω—Å–æ–ª—å —Å –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ–º —ç–º–æ–¥–∑–∏-–∏–∫–æ–Ω–æ–∫.</li>
 * </ul>
 *
 * –ü—Ä–∏–º–µ—Ä –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è:
 * <pre>{@code
 * Statistics stats = new Statistics(island);
 * stats.printStatistics(Wolf.class); // üê∫ - 12
 * stats.printStatistics(Grass.class); // üåø - 250
 * }</pre>
 */
public class Statistics {
    // –ö–ª–∞—Å—Å –æ—Ç–≤–µ—á–∞–µ—Ç –∑–∞ —Å–±–æ—Ä –∏ –≤—ã–≤–æ–¥ —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∏ –ø–æ –æ–±—ä–µ–∫—Ç–∞–º –Ω–∞ –æ—Å—Ç—Ä–æ–≤–µ.

    private final Island island;
    // –°—Å—ã–ª–∫–∞ –Ω–∞ –æ–±—ä–µ–∫—Ç –æ—Å—Ç—Ä–æ–≤–∞, –ø–æ –∫–æ—Ç–æ—Ä–æ–º—É –±—É–¥–µ—Ç —Å–æ–±–∏—Ä–∞—Ç—å—Å—è —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞.

    public static final Map<Class<?>, String> ICONS = Map.ofEntries(
            // –°—Ç–∞—Ç–∏—á–µ—Å–∫–∞—è –∫–∞—Ä—Ç–∞, —Å–æ–ø–æ—Å—Ç–∞–≤–ª—è—é—â–∞—è –∫–ª–∞—Å—Å —Å—É—â–Ω–æ—Å—Ç–∏ —Å –µ—ë –∏–∫–æ–Ω–∫–æ–π (—ç–º–æ–¥–∑–∏).
            Map.entry(Grass.class, "\uD83C\uDF3F"),     // –¢—Ä–∞–≤–∞ üåø
            Map.entry(Wolf.class, "\uD83D\uDC3A"),      // –í–æ–ª–∫ üê∫
            Map.entry(Rabbit.class, "\uD83D\uDC07"),    // –ö—Ä–æ–ª–∏–∫ üêá
            Map.entry(Sheep.class, "\uD83D\uDC11"),     // –û–≤—Ü–∞ üêë
            Map.entry(Boar.class, "\uD83D\uDC17"),      // –ö–∞–±–∞–Ω üêó
            Map.entry(Buffalo.class, "\uD83D\uDC03"),   // –ë—É–π–≤–æ–ª üêÉ
            Map.entry(Caterpillar.class, "\uD83D\uDC1B"), // –ì—É—Å–µ–Ω–∏—Ü–∞ üêõ
            Map.entry(Deer.class, "\uD83E\uDD8C"),      // –û–ª–µ–Ω—å ü¶å
            Map.entry(Duck.class, "\uD83E\uDD86"),      // –£—Ç–∫–∞ ü¶Ü
            Map.entry(Goat.class, "\uD83D\uDC10"),      // –ö–æ–∑–∞ üêê
            Map.entry(Horse.class, "\uD83D\uDC0E"),     // –õ–æ—à–∞–¥—å üêé
            Map.entry(Mouse.class, "\uD83D\uDC01"),     // –ú—ã—à—å üêÅ
            Map.entry(Bear.class, "\uD83D\uDC3B"),      // –ú–µ–¥–≤–µ–¥—å üêª
            Map.entry(Boa.class, "\uD83D\uDC0D"),       // –£–¥–∞–≤ üêç
            Map.entry(Eagle.class, "\uD83E\uDD85"),     // –û—Ä—ë–ª ü¶Ö
            Map.entry(Fox.class, "\uD83E\uDD8A")        // –õ–∏—Å–∞ ü¶ä
    );
    /**
     * –ö–æ–Ω—Å—Ç—Ä—É–∫—Ç–æ—Ä –¥–ª—è —Å–æ–∑–¥–∞–Ω–∏—è –æ–±—ä–µ–∫—Ç–∞ {@code Statistics}.
     *
     * @param island –æ–±—ä–µ–∫—Ç –æ—Å—Ç—Ä–æ–≤–∞, –ø–æ –∫–æ—Ç–æ—Ä–æ–º—É –±—É–¥–µ—Ç —Å–æ–±–∏—Ä–∞—Ç—å—Å—è —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞
     */
    public Statistics(Island island) {
        // –ö–æ–Ω—Å—Ç—Ä—É–∫—Ç–æ—Ä –ø—Ä–∏–Ω–∏–º–∞–µ—Ç –æ–±—ä–µ–∫—Ç –æ—Å—Ç—Ä–æ–≤–∞ –∏ —Å–æ—Ö—Ä–∞–Ω—è–µ—Ç –µ–≥–æ –¥–ª—è –¥–∞–ª—å–Ω–µ–π—à–µ–π —Ä–∞–±–æ—Ç—ã.
        this.island = island;
    }
    /**
     * –ü–æ–¥—Å—á–∏—Ç—ã–≤–∞–µ—Ç –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ —ç–∫–∑–µ–º–ø–ª—è—Ä–æ–≤ —É–∫–∞–∑–∞–Ω–Ω–æ–≥–æ –∫–ª–∞—Å—Å–∞ (–∂–∏–≤–æ—Ç–Ω—ã—Ö –∏–ª–∏ —Ä–∞—Å—Ç–µ–Ω–∏–π)
     * –Ω–∞ –≤—Å—ë–º –æ—Å—Ç—Ä–æ–≤–µ.
     *
     * @param clazz –∫–ª–∞—Å—Å —Å—É—â–Ω–æ—Å—Ç–∏, –¥–ª—è –∫–æ—Ç–æ—Ä–æ–π –Ω—É–∂–Ω–æ –ø–æ—Å—á–∏—Ç–∞—Ç—å –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ
     * @return –æ–±—â–µ–µ –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ —ç–∫–∑–µ–º–ø–ª—è—Ä–æ–≤ –¥–∞–Ω–Ω–æ–≥–æ –∫–ª–∞—Å—Å–∞ –Ω–∞ –æ—Å—Ç—Ä–æ–≤–µ
     */
    public int countEntities(Class<?> clazz) {
        // –ú–µ—Ç–æ–¥ —Å—á–∏—Ç–∞–µ—Ç –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ –æ–±—ä–µ–∫—Ç–æ–≤ —É–∫–∞–∑–∞–Ω–Ω–æ–≥–æ –∫–ª–∞—Å—Å–∞ (–∂–∏–≤–æ—Ç–Ω—ã—Ö –∏–ª–∏ —Ä–∞—Å—Ç–µ–Ω–∏–π) –Ω–∞ –≤—Å—ë–º –æ—Å—Ç—Ä–æ–≤–µ.
        int num = 0;
        // –ü–µ—Ä–µ–º–µ–Ω–Ω–∞—è –¥–ª—è —Ö—Ä–∞–Ω–µ–Ω–∏—è –æ–±—â–µ–≥–æ –∫–æ–ª–∏—á–µ—Å—Ç–≤–∞.

        Cell[][] cells = island.getLocation();
        // –ü–æ–ª—É—á–∞–µ–º –¥–≤—É–º–µ—Ä–Ω—ã–π –º–∞—Å—Å–∏–≤ –∫–ª–µ—Ç–æ–∫ –æ—Å—Ç—Ä–æ–≤–∞.

        for (int i = 0; i < cells.length; i++) {
            // –í–Ω–µ—à–Ω–∏–π —Ü–∏–∫–ª –ø–æ —Å—Ç—Ä–æ–∫–∞–º –º–∞—Å—Å–∏–≤–∞ –∫–ª–µ—Ç–æ–∫.
            for (int j = 0; j < cells[i].length; j++) {
                // –í–Ω—É—Ç—Ä–µ–Ω–Ω–∏–π —Ü–∏–∫–ª –ø–æ —Å—Ç–æ–ª–±—Ü–∞–º –º–∞—Å—Å–∏–≤–∞ –∫–ª–µ—Ç–æ–∫.
                Cell cell = island.getCell(i, j);
                // –ü–æ–ª—É—á–∞–µ–º –∫–æ–Ω–∫—Ä–µ—Ç–Ω—É—é –∫–ª–µ—Ç–∫—É –ø–æ –∫–æ–æ—Ä–¥–∏–Ω–∞—Ç–∞–º.
                if (cell == null) continue;
                // –ï—Å–ª–∏ –∫–ª–µ—Ç–∫–∞ –æ—Ç—Å—É—Ç—Å—Ç–≤—É–µ—Ç, –ø—Ä–æ–ø—É—Å–∫–∞–µ–º –µ—ë.

                if (Plant.class.isAssignableFrom(clazz)) {
                    // –ï—Å–ª–∏ –∫–ª–∞—Å—Å –æ—Ç–Ω–æ—Å–∏—Ç—Å—è –∫ —Ä–∞—Å—Ç–µ–Ω–∏—è–º:
                    Map<Class<? extends Plant>, List<Plant>> plants = cell.getPlants();
                    // –ü–æ–ª—É—á–∞–µ–º –∫–∞—Ä—Ç—É —Ä–∞—Å—Ç–µ–Ω–∏–π –≤ –∫–ª–µ—Ç–∫–µ.
                    List<Plant> list = plants.get(clazz);
                    // –ü–æ–ª—É—á–∞–µ–º —Å–ø–∏—Å–æ–∫ —Ä–∞—Å—Ç–µ–Ω–∏–π –∫–æ–Ω–∫—Ä–µ—Ç–Ω–æ–≥–æ –∫–ª–∞—Å—Å–∞.
                    if (list != null) {
                        // –ï—Å–ª–∏ —Å–ø–∏—Å–æ–∫ —Å—É—â–µ—Å—Ç–≤—É–µ—Ç:
                        num += list.size();
                        // –î–æ–±–∞–≤–ª—è–µ–º –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ —Ä–∞—Å—Ç–µ–Ω–∏–π –≤ –æ–±—â–∏–π —Å—á—ë—Ç—á–∏–∫.
                    }
                } else if (Animal.class.isAssignableFrom(clazz)) {
                    // –ï—Å–ª–∏ –∫–ª–∞—Å—Å –æ—Ç–Ω–æ—Å–∏—Ç—Å—è –∫ –∂–∏–≤–æ—Ç–Ω—ã–º:
                    Map<Class<? extends Animal>, List<Animal>> animals = cell.getAnimals();
                    // –ü–æ–ª—É—á–∞–µ–º –∫–∞—Ä—Ç—É –∂–∏–≤–æ—Ç–Ω—ã—Ö –≤ –∫–ª–µ—Ç–∫–µ.
                    List<Animal> list = animals.get(clazz);
                    // –ü–æ–ª—É—á–∞–µ–º —Å–ø–∏—Å–æ–∫ –∂–∏–≤–æ—Ç–Ω—ã—Ö –∫–æ–Ω–∫—Ä–µ—Ç–Ω–æ–≥–æ –∫–ª–∞—Å—Å–∞.
                    if (list != null) {
                        // –ï—Å–ª–∏ —Å–ø–∏—Å–æ–∫ —Å—É—â–µ—Å—Ç–≤—É–µ—Ç:
                        num += list.size();
                        // –î–æ–±–∞–≤–ª—è–µ–º –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ –∂–∏–≤–æ—Ç–Ω—ã—Ö –≤ –æ–±—â–∏–π —Å—á—ë—Ç—á–∏–∫.
                    }
                }
            }
        }
        return num;
        // –í–æ–∑–≤—Ä–∞—â–∞–µ–º –æ–±—â–µ–µ –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ –Ω–∞–π–¥–µ–Ω–Ω—ã—Ö –æ–±—ä–µ–∫—Ç–æ–≤.
    }
    /**
     * –í—ã–≤–æ–¥–∏—Ç —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫—É –ø–æ —É–∫–∞–∑–∞–Ω–Ω–æ–º—É –∫–ª–∞—Å—Å—É –≤ –∫–æ–Ω—Å–æ–ª—å.
     * –§–æ—Ä–º–∞—Ç: {@code <–∏–∫–æ–Ω–∫–∞> - <–∫–æ–ª–∏—á–µ—Å—Ç–≤–æ>}
     *
     * @param clazz –∫–ª–∞—Å—Å —Å—É—â–Ω–æ—Å—Ç–∏ (–∂–∏–≤–æ—Ç–Ω–æ–µ –∏–ª–∏ —Ä–∞—Å—Ç–µ–Ω–∏–µ), –¥–ª—è –∫–æ—Ç–æ—Ä–æ–π –≤—ã–≤–æ–¥–∏—Ç—Å—è —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞
     */
    public void printStatistics(Class<?> clazz) {
        // –ú–µ—Ç–æ–¥ –≤—ã–≤–æ–¥–∏—Ç —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫—É –ø–æ —É–∫–∞–∑–∞–Ω–Ω–æ–º—É –∫–ª–∞—Å—Å—É (–∂–∏–≤–æ—Ç–Ω—ã–µ –∏–ª–∏ —Ä–∞—Å—Ç–µ–Ω–∏—è).
        int count = countEntities(clazz);
        // –°—á–∏—Ç–∞–µ–º –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ –æ–±—ä–µ–∫—Ç–æ–≤ –¥–∞–Ω–Ω–æ–≥–æ –∫–ª–∞—Å—Å–∞.
        String icon = ICONS.getOrDefault(clazz, "?");
        // –ü–æ–ª—É—á–∞–µ–º –∏–∫–æ–Ω–∫—É –¥–ª—è –∫–ª–∞—Å—Å–∞, –µ—Å–ª–∏ –Ω–µ—Ç ‚Äî —Å—Ç–∞–≤–∏–º –∑–Ω–∞–∫ –≤–æ–ø—Ä–æ—Å–∞.
        System.out.println(icon + " - " + count);
        // –í—ã–≤–æ–¥–∏–º –∏–∫–æ–Ω–∫—É –∏ –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ –≤ –∫–æ–Ω—Å–æ–ª—å.
    }
}

